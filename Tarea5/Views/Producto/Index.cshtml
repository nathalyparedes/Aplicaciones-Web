@model IEnumerable<Tarea5.Models.ProductoModel>

@{

    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Lista de Productos</h1>

<p>
    <a asp-action="Create">Create New</a>
</p>
        
        <script src="~/lib/jquery/dist/jquery.min.js"></script>

        <script>
    $(document).ready(() => {
        // Cargar la lista de productos
        $.get("../../Producto/ListaProductos", (ListaProductos) => {
            let html = "";
            $.each(ListaProductos, (index, producto) => { // Cambiado a ListaProductos
                html += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${producto.nombreProducto}</td>
                        <td>${producto.presentacion}</td>
                        <td>${producto.codigoBarras}</td>
                        <td>
                            <a class="btn btn-outline-warning" href="/Productos/Edit/${producto.id}">Edit</a> |
                            <a class="btn btn-outline-info" href="/Productos/Details/${producto.id}">Details</a> |
                            <a class="btn btn-outline-danger" href="/Productos/Delete/${producto.id}">Delete</a>
                        </td>
                    </tr>
                `;
            });
            // Insertar las filas de productos en la tabla
            $("#tablaProductos tbody").html(html);
        }).fail(() => {
            console.error("Error al cargar la lista de productos.");
        });

        // Cargar los detalles de la factura
        $.get("../../detallefactura/TablaFactura", (listadetalleFactura) => {
            let htmlFactura = "";
            $.each(listadetalleFactura, (index, valor) => {
                htmlFactura += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${valor.Cantidad}</td>
                        <td>${valor.Nombre_Producto}</td>
                        <td>${valor.Precio}</td>
                        <td>${valor.Total}</td>
                        <td>
                            <a class="btn btn-outline-warning" href="/DetalleFactura/Edit/${valor.Id}">Edit</a> |
                            <a class="btn btn-outline-info" href="/DetalleFactura/Details/${valor.Id}">Details</a> |
                            <a class="btn btn-outline-danger" href="/DetalleFactura/Delete/${valor.Id}">Delete</a>
                        </td>
                    </tr>
                `;
            });
            // Insertar los datos de la factura en la tabla
            $("#tablaFactura tbody").html(htmlFactura);
        }).fail(() => {
            console.error("Error al cargar los detalles de la factura.");
        });
    });
</script>

        <!-- Tabla de Productos -->
        <table class="table table-responsive table-bordered table-striped" id="tablaProductos">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Nombre Producto</th>
                    <th>Presentación</th>
                    <th>Código de Barras</th>
                    <th>Acciones</th>
                </tr>
            </thead>
            <tbody>
                <!-- Las filas se insertarán dinámicamente aquí -->
            </tbody>
        </table>

        