<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles de la Factura</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Asegúrate de incluir jQuery -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"> <!-- Bootstrap -->
</head>
<body>

    <h1 class="text-center">Detalles de la Factura</h1>
    <p>
        <a asp-action="Create">Create New</a>
    </p>

    <!-- Tabla de Detalles de Factura -->
    <table class="table table-responsive table-bordered table-striped" id="tablafactura">
        <thead>
            <tr>
                <th>#</th>
                <th>Cantidad</th>
                <th>Producto</th>
                <th>Precio</th>
                <th>Total</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        $(document).ready(function() {
                   $.get("../../detallefactura/Tabla", function(listadetalle) {
    console.log("Datos recibidos:", listadetalle);  // Verifica que los datos sean correctos

    let htmlFactura = "";

    $.each(listadetalle, function(index, valor) {
        console.log(`Ítem ${index + 1}:`, valor);  // Verifica los valores antes de agregarlos a la tabla

        htmlFactura += `
            <tr>
                <td>${index + 1}</td>
                <td>${valor.cantidad}</td>  <!-- Usa 'cantidad' en lugar de 'Cantidad' -->
                <td>${valor.nombre_Producto}</td>  <!-- Usa 'nombre_Producto' en lugar de 'Nombre_Producto' -->
                <td>${valor.precio}</td>  <!-- Usa 'precio' en lugar de 'Precio' -->
                <td>${valor.total}</td>  <!-- Usa 'total' en lugar de 'Total' -->
                <td>
                    <a href="javascript:void(0)" class="btn btn-outline-warning edit-factura" data-id="${valor.id}">Edit</a> |
                    <a href="javascript:void(0)" class="btn btn-outline-info view-factura" data-id="${valor.id}">Details</a> |
                    <a href="javascript:void(0)" class="btn btn-outline-danger delete-factura" data-id="${valor.id}">Delete</a>
                </td>
            </tr>
        `;
    });

    $("#tablafactura tbody").html(htmlFactura);
}).fail(function() {
    console.error("Error al cargar los datos de la tabla de factura.");
});

            $(document).on('click', '.edit-factura', function() {
                const facturaId = $(this).data('id');
                console.log(`Editando factura con ID: ${facturaId}`);
            });

            $(document).on('click', '.view-factura', function() {
                const facturaId = $(this).data('id');
                console.log(`Ver detalles de factura con ID: ${facturaId}`);
            });

            $(document).on('click', '.delete-factura', function() {
                const facturaId = $(this).data('id');
                console.log(`Eliminando factura con ID: ${facturaId}`);
            });
        });
    </script>

</body>
</html>